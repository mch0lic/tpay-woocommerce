/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/main.ts":
/*!********************!*\
  !*** ./js/main.ts ***!
  \********************/
/***/ (function() {

eval("(function($) {\n  $(document).ready(function() {\n    $(document.body).on(\"change\", 'input[name=\"payment_method\"]', function() {\n      $(\"body\").trigger(\"update_checkout\");\n    });\n    $(\"body\").on(\"click\", \"li.wc_payment_method > label\", function() {\n      var th = $(this);\n      setTimeout(function() {\n        $(\"html, body\").animate({\n          scrollTop: th.offset().top - 180\n        }, 400);\n      }, 600);\n    });\n    $(\"body\").on(\"click\", 'li.wc_payment_method > label:not([for=\"payment_method_tpaysf\"])', function() {\n      $(\"#carddata\").val(\"\");\n      $(\"#card_vendor\").val($.payment.cardType(\"\"));\n      $(\"#card_short_code\").val(\"\");\n      $(\"#card_number\").val(\"\");\n      $(\"#expiry_date\").val(\"\");\n      $(\"#cvc\").val(\"\");\n      $(\"#place_order\").removeClass(\"stop_propagation\");\n      $(\".card-container .wrong\").removeClass(\"wrong\");\n    });\n    $(\"body\").on(\"click\", \".saved-cards input\", function() {\n      if ($(this).prop(\"checked\") === true) {\n        $(\".saved-cards input\").not($(this)).prop(\"checked\", false);\n        $(\".saved-cards input\").not($(this)).attr(\"name\", \"saved-card-unchecked\");\n        $(this).attr(\"name\", \"saved-card\");\n        clear_card_fields();\n        $(\".card-container\").find(\"input\").attr(\"readonly\", true);\n      } else {\n        $(this).attr(\"name\", \"saved-card-unchecked\");\n        $(\".card-container\").find(\"input\").attr(\"readonly\", false);\n      }\n    });\n    function clear_card_fields() {\n      $(\"#carddata\").val(\"\");\n      $(\"#card_vendor\").val($.payment.cardType(\"\"));\n      $(\"#card_short_code\").val(\"\");\n      $(\"#card_number\").val(\"\");\n      $(\"#expiry_date\").val(\"\");\n      $(\"#cvc\").val(\"\");\n      $(\".card-container .wrong\").removeClass(\"wrong\");\n    }\n    $(\"body\").on(\"click\", '[class*=\"tpay_blik-payment-\"]', function() {\n      $('[class*=\"tpay_blik-payment-\"]').removeClass(\"active\");\n      $(this).addClass(\"active\");\n      $(this).find('[name=\"blik-type\"]').prop(\"checked\", \"checked\");\n    });\n    $(\"body\").on(\"keyup\", '.tpay-blik0 [name=\"blik0\"]', function() {\n      var bval = $(this).val().replace(\"-\", \"\");\n      $(this).val(chunk(bval, 3).join(\"-\"));\n    });\n    $(\"body\").on(\"click\", \".modal-tpay-blik .close\", function(e) {\n      e.preventDefault();\n      $(\".modal-tpay-blik-container\").hide();\n      $(\".tpay-blik-alias\").click();\n      $(\".tpay-blik-alias\").addClass(\"active\");\n    });\n    $(\"body\").on(\"click\", \".show-blik-info\", function(e) {\n      e.preventDefault();\n      $(\".modal-tpay-blik-container\").css(\"display\", \"flex\");\n    });\n    $(\"body\").on(\"keyup\", '.tpay-sf [name=\"card-number\"]', function() {\n      $(\".saved-cards\").find('input[type=\"radio\"]').prop(\"checked\", false);\n      new CardPayment($(\".tpay-sf\").attr(\"data-pubkey\"));\n    });\n    $(\"body\").on(\"click\", \"#place_order\", function(e) {\n      if ($(\".tpay-sf\").attr(\"data-pubkey\") != \"\" && $(\".tpay-sf\").length > 0 && $(\"#place_order\").hasClass(\"stop_propagation\")) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        console.log(\"sf\");\n        if ($(\".card-container .wrong\").length == 0) {\n          tokenize_card($(\".tpay-sf\").attr(\"data-pubkey\"));\n          setTimeout(function() {\n            $(\"#place_order\").closest(\"form\").submit();\n          }, 400);\n        }\n      }\n    });\n  });\n  function hashAsync(algo, str) {\n    return crypto.subtle.digest(algo, new TextEncoder(\"utf-8\").encode(str)).then((buf) => {\n      return Array.prototype.map.call(new Uint8Array(buf), (x) => (\"00\" + x.toString(16)).slice(-2)).join(\"\");\n    });\n  }\n  function tokenize_card(pubkey) {\n    var numberInput = $(\"#card_number\"), expiryInput = $(\"#expiry_date\"), cvcInput = $(\"#cvc\");\n    var cardNumber = numberInput.val().replace(/\\s/g, \"\"), cd = cardNumber + \"|\" + expiryInput.val().replace(/\\s/g, \"\") + \"|\" + cvcInput.val().replace(/\\s/g, \"\") + \"|\" + document.location.origin, encrypt = new JSEncrypt(), decoded = Base64.decode(pubkey), encrypted;\n    encrypt.setPublicKey(decoded);\n    encrypted = encrypt.encrypt(cd);\n    $(\"#carddata\").val(encrypted);\n    $(\"#card_vendor\").val($.payment.cardType(cardNumber));\n    $(\"#card_short_code\").val(cardNumber.substr(-4));\n    hashAsync(\"SHA-256\", cardNumber).then((outputHash) => $(\"#card_hash\").val(outputHash));\n    numberInput.val(\"\");\n    expiryInput.val(\"\");\n    cvcInput.val(\"\");\n  }\n  function CardPayment(pubkey) {\n    this.pubkey = pubkey;\n    var numberInput = $(\"#card_number\"), expiryInput = $(\"#expiry_date\"), cvcInput = $(\"#cvc\"), nameInput = $(\"#c_name\"), emailInput = $(\"#c_email\"), termsOfServiceInput = $(\"#tpay-cards-accept-regulations-checkbox\");\n    const TRIGGER_EVENTS = \"input change blur\";\n    function SubmitPayment() {\n      var cardNumber = numberInput.val().replace(/\\s/g, \"\"), cd = cardNumber + \"|\" + expiryInput.val().replace(/\\s/g, \"\") + \"|\" + cvcInput.val().replace(/\\s/g, \"\") + \"|\" + document.location.origin, encrypt = new JSEncrypt(), decoded = Base64.decode(pubkey), encrypted;\n      $(\"#card_continue_btn\").fadeOut();\n      $(\"#loading_scr\").fadeIn();\n      encrypt.setPublicKey(decoded);\n      encrypted = encrypt.encrypt(cd);\n      $(\"#carddata\").val(encrypted);\n      $(\"#card_vendor\").val($.payment.cardType(cardNumber));\n      $(\"#card_short_code\").val(cardNumber.substr(-4));\n      numberInput.val(\"\");\n      expiryInput.val(\"\");\n      cvcInput.val(\"\");\n    }\n    function setWrong($elem) {\n      $elem.addClass(\"wrong\").removeClass(\"valid\");\n    }\n    function setValid($elem) {\n      $elem.addClass(\"valid\").removeClass(\"wrong\");\n    }\n    function validateCcNumber($elem) {\n      var isValid = false, ccNumber = $.payment.formatCardNumber($elem.val()), supported = [\"mastercard\", \"maestro\", \"visa\"], type = $.payment.cardType(ccNumber), notValidNote = $(\"#info_msg_not_valid\"), cardTypeHolder = $(\".tpay-card-icon\"), notSupportedNote = $(\"#info_msg_not_supported\");\n      $elem.val($.payment.formatCardNumber($elem.val()));\n      cardTypeHolder.attr(\"class\", \"tpay-card-icon\");\n      if (supported.indexOf(type) < 0 && type !== null && ccNumber.length > 1) {\n        showElem(notSupportedNote);\n        hideElem(notValidNote);\n        setWrong($elem);\n      } else if (supported.indexOf(type) > -1 && $.payment.validateCardNumber(ccNumber)) {\n        setValid($elem);\n        hideElem(notSupportedNote);\n        hideElem(notValidNote);\n        isValid = true;\n      } else if (ccNumber.length < 4) {\n        hideElem(notSupportedNote);\n        hideElem(notValidNote);\n        setWrong($elem);\n      } else {\n        setWrong($elem);\n        showElem(notValidNote);\n        hideElem(notSupportedNote);\n      }\n      if (type !== \"\") {\n        cardTypeHolder.addClass(\"tpay-\" + type + \"-icon\");\n      }\n      return isValid;\n    }\n    function hideElem($elem) {\n      $elem.css(\"display\", \"none\");\n    }\n    function showElem($elem) {\n      $elem.css(\"display\", \"block\");\n    }\n    function validateExpiryDate($elem) {\n      var isValid = false, expiration;\n      $elem.val($.payment.formatExpiry($elem.val()));\n      expiration = $elem.payment(\"cardExpiryVal\");\n      if (!$.payment.validateCardExpiry(expiration.month, expiration.year)) {\n        setWrong($elem);\n      } else {\n        setValid($elem);\n        isValid = true;\n      }\n      return isValid;\n    }\n    function validateCvc($elem) {\n      var isValid = false;\n      if (!$.payment.validateCardCVC($elem.val(), $.payment.cardType(numberInput.val().replace(/\\s/g, \"\")))) {\n        setWrong($elem);\n      } else {\n        setValid($elem);\n        isValid = true;\n      }\n      return isValid;\n    }\n    function validateName($elem) {\n      var isValid = false;\n      if ($elem.val().length < 3) {\n        setWrong($elem);\n      } else {\n        isValid = true;\n        setValid($elem);\n      }\n      return isValid;\n    }\n    function validateEmail($elem) {\n      var isValid = false;\n      if (!$elem.formance(\"validate_email\")) {\n        setWrong($elem);\n      } else {\n        isValid = true;\n        setValid($elem);\n      }\n      return isValid;\n    }\n    function checkName() {\n      if (nameInput.length > 0) {\n        return validateName(nameInput);\n      }\n      return true;\n    }\n    function checkEmail() {\n      if (emailInput.length > 0) {\n        return validateEmail(emailInput);\n      }\n      return true;\n    }\n    function validateTos($elem) {\n      if ($elem.is(\":checked\")) {\n        setValid($elem);\n        return true;\n      } else {\n        setWrong($elem);\n        return false;\n      }\n    }\n    function checkForm() {\n      var isValidForm = false;\n      if (validateCcNumber(numberInput) && validateExpiryDate(expiryInput) && validateCvc(cvcInput) && checkName() && checkEmail() && validateTos(termsOfServiceInput)) {\n        isValidForm = true;\n      }\n      return isValidForm;\n    }\n    $(\"#place_order\").addClass(\"stop_propagation\");\n    numberInput.on(TRIGGER_EVENTS, function() {\n      validateCcNumber($(this));\n    });\n    expiryInput.on(TRIGGER_EVENTS, function() {\n      validateExpiryDate($(this));\n    });\n    cvcInput.on(TRIGGER_EVENTS, function() {\n      validateCvc($(this));\n    });\n    nameInput.on(TRIGGER_EVENTS, function() {\n      validateName($(this));\n    });\n    emailInput.on(TRIGGER_EVENTS, function() {\n      validateEmail($(this));\n    });\n    termsOfServiceInput.on(TRIGGER_EVENTS, function() {\n      validateTos($(this));\n    });\n  }\n  $(\"document\").ready(function() {\n    $(\"input[name=savedId]\").first().prop(\"checked\", \"checked\");\n    handleForm();\n  });\n  function handleForm() {\n    $(\"input[name=savedId]\").each(function() {\n      $(this).click(function() {\n        if ($(this).is(\":checked\")) {\n          if ($(this).val() !== \"new\") {\n            $(\"#card_form\").css({ opacity: 1 }).animate({ opacity: 0 }, 500);\n            setTimeout(\n              function() {\n                $(\"#card_form\").css({ display: \"none\" });\n              },\n              500\n            );\n          }\n        }\n      });\n    });\n    $(\"#newCard\").click(function() {\n      if ($(this).is(\":checked\")) {\n        $(\"#card_form\").css({ opacity: 0, display: \"block\" }).animate({ opacity: 1 }, 500);\n      }\n    });\n  }\n})(jQuery);\nfunction cc_format(value) {\n  var v = value.replace(/\\s+/g, \"\").replace(/[^0-9]/gi, \"\");\n  var matches = v.match(/\\d{4,16}/g);\n  var match = matches && matches[0] || \"\";\n  var parts = [];\n  for (i = 0, len = match.length; i < len; i += 4) {\n    parts.push(match.substring(i, i + 4));\n  }\n  if (parts.length) {\n    return parts.join(\" \");\n  } else {\n    return value;\n  }\n}\nfunction chunk(str, n) {\n  var ret = [];\n  var i2;\n  var len2;\n  for (i2 = 0, len2 = str.length; i2 < len2; i2 += n) {\n    ret.push(str.substr(i2, n));\n  }\n  return ret;\n}\n;\n\n\n//# sourceURL=webpack://tpay/./js/main.ts?");

/***/ }),

/***/ "./scss/main.scss":
/*!************************!*\
  !*** ./scss/main.scss ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://tpay/./scss/main.scss?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	__webpack_modules__["./js/main.ts"](0, {}, __webpack_require__);
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./scss/main.scss"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;